<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.6.1"><title>Jiang Qinhua - Project Portfolio</title><link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css"></head><body class="article"><div id="site-header"><nav class="navbar navbar-light bg-light"><div class="container"><a class="navbar-brand" href="../index.html">Book-Squirrel</a><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="../UserGuide.html">User Guide</a></li><li class="nav-item"><a class="nav-link" href="../DeveloperGuide.html">Developer Guide</a></li><li class="nav-item"><a class="nav-link active" href="../AboutUs.html">About Us</a></li><li class="nav-item"><a class="nav-link" href="../ContactUs.html">Contact Us</a></li><li class="navitem"><a class="nav-link" href="https://github.com/cs2103-ay1819s2-w11-4/main"><span class="fa fa-github fa-lg" aria-hidden="true"></span>&nbsp;View on GitHub</a></li></ul></div></nav></div><div id="header"><h1>Jiang Qinhua - Project Portfolio</h1></div><div id="content"><div id="preamble">
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="../images/jiangqinhua.png" alt="jiangqinhua" width="200px">
</div>
</div>
<div class="paragraph">
<p>[<a href="https://github.com/jiangqinhua">Github</a>][<a href="https://cs2103-ay1819s2-w11-4.github.io/main/team/jiangqinhua.html">Portfolio</a>]</p>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel0">
<li><a href="#project-booksquirrel">PROJECT: BookSquirrel</a>
<ul class="sectlevel1">
<li><a href="#introduction">1. Introduction</a></li>
<li><a href="#summary-of-contributions">2. Summary of Contributions</a></li>
<li><a href="#contributions-to-the-user-guide">3. Contributions to the User Guide</a>
<ul class="sectlevel2">
<li><a href="#sort-books-command-code-sortbook-code">3.1. Sort books command : <code>sortBook</code></a></li>
<li><a href="#undoing-previous-command-code-undo-code">3.2. Undoing previous command : <code>undo</code></a></li>
<li><a href="#redoing-the-previously-undone-command-code-redo-code">3.3. Redoing the previously undone command: <code>redo</code></a></li>
<li><a href="#filter-books-coming-in-v2-0">3.4. filter books [coming in v2.0]</a></li>
</ul>
</li>
<li><a href="#contributions-to-the-developer-guide">4. Contributions to the Developer Guide</a>
<ul class="sectlevel2">
<li><a href="#sortbook-feature">4.1. SortBook feature</a></li>
<li><a href="#undo-redo-feature">4.2. Undo/Redo feature</a></li>
<li><a href="#proposed-filter-book">4.3. [Proposed] Filter Book</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<h1 id="project-booksquirrel" class="sect0"><a class="link" href="#project-booksquirrel">PROJECT: BookSquirrel</a></h1>
<div class="sect1">
<h2 id="introduction"><a class="link" href="#introduction">1. Introduction</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This portfolio is to document my contribution to the project called BookSquirrel. BookSquirrel is a team project for our CS2103T Software Engineering. The aim of this project is to create a new application base on a given project called AddressBook Level 4(AB4), make the new project running without any bugs. In the project, Most of the word documents are written in asciidoc or markdown.<br>
There are some basic requirements for this project:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Modifying base on an existing project instead of starting from scratch.</p>
</li>
<li>
<p>Forming a team and collaborate with team members.</p>
</li>
<li>
<p>Using Github and Version Control System to manage our project, knowing how to use git commands.</p>
</li>
<li>
<p>Must follow the coding standard.</p>
</li>
<li>
<p>Must write various tests for the project such as the Unit test.</p>
</li>
<li>
<p>Developer guide and User guide are compulsory.</p>
</li>
<li>
<p>The project is base on Java 9.0, so Java is the only language you can use for this project.</p>
</li>
<li>
<p>Forbidden feathers such as login in, using network function and using database function.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>BookSquirrel is a desktop application for those who want to keep records of books they&#8217;ve read. You can write down multiple reviews for a single book.
Before you write any reviews for a book, you need to add a book into our application first. The details include book name, author of the book, rating point that you would rate for this book and some optional tags.BookSquirrel is optimized for those who prefer to work with a <strong>Command Line Interface</strong> (CLI) while still having the benefits of a <strong>Graphical User Interface</strong> (GUI).<br></p>
</div>
<div class="paragraph">
<p>In order to meet the task requirement, I learned to consistently write code contribute to my project to avoid last minus work. I will ask for help if I am stuck too long and I will communicate with team members frequently to avoid doing redundant or repeated works.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary-of-contributions"><a class="link" href="#summary-of-contributions">2. Summary of Contributions</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>My contribution to this project includes:<br></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Major enhancement</strong>: added the <strong>ability to rearrange books in certain order</strong></p>
<div class="ulist">
<ul>
<li>
<p>What it does: allows the user to sort the books they added by book name, author or rating.</p>
</li>
<li>
<p>Justification: This feature improves the product significantly because users can easier arrange all books in the way they want, such as high rating to low rating.</p>
</li>
<li>
<p>Highlights: This enhancement is not simply sorted by one attribute, it can be sorted with more than one attributes at the same time. For example, you want to sort the rating of books in descending, if they are tied you want them in ascending book name.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Major enhancement</strong>: added the ability to undo/redo previous commands</p>
<div class="ulist">
<ul>
<li>
<p><strong>What it does</strong>: allows the user to undo all previous commands one at a time. Preceding undo commands can be reversed by using the redo command.</p>
</li>
<li>
<p><strong>Justification</strong>: This feature improves the product significantly because a user can make mistakes in commands and the app should provide a convenient way to rectify them.</p>
</li>
<li>
<p><strong>Highlights</strong>: This enhancement affects existing commands and commands to be added in future. It required an in-depth analysis of design alternatives. The implementation too was challenging as it required changes to existing commands.</p>
</li>
<li>
<p><strong>Credits</strong>: The code is modified base on <a href="https://github.com/nus-cs2103-AY1819S2/addressbook-level4">se-edu/addressbook-level4</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Minor enhancement</strong>: modify the UI base on AddressBook- level 4.</p>
</li>
<li>
<p><strong>Code contributed</strong>: <a href="https://github.com/cs2103-ay1819s2-w11-4/main/pull/78/files">Functional code</a> <a href="https://github.com/cs2103-ay1819s2-w11-4/main/pull/81/files">Test code</a></p>
</li>
<li>
<p><strong>Other contributions</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Update Tag color for the project(Pull requests, <a href="https://github.com/cs2103-ay1819s2-w11-4/main/pull/10">#10</a>)</p>
</li>
<li>
<p>Documentation:</p>
<div class="ulist">
<ul>
<li>
<p>Did cosmetic tweaks to existing contents of the User Guide: <a href="https://github.com/cs2103-ay1819s2-w11-4/main/pull/82">#82</a>,
<a href="https://github.com/cs2103-ay1819s2-w11-4/main/pull/102">#102</a></p>
</li>
<li>
<p>Did cosmetic tweaks to existing contents of the Developer Guide: <a href="https://github.com/cs2103-ay1819s2-w11-4/main/pull/14">#14</a>, <a href="https://github.com/cs2103-ay1819s2-w11-4/main/pull/102">#102</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Community:</p>
<div class="ulist">
<ul>
<li>
<p>PRs reviewed (with non-trivial review comments)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Tools:</p>
<div class="ulist">
<ul>
<li>
<p>Integrated a new Github plugin (CircleCI) to the team repols</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-user-guide"><a class="link" href="#contributions-to-the-user-guide">3. Contributions to the User Guide</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="sort-books-command-code-sortbook-code"><a class="link" href="#sort-books-command-code-sortbook-code">3.1. Sort books command : <code>sortBook</code></a></h3>
<div class="paragraph">
<p>sort bookList in specify order.<br>
Format: <code>sortBook st/TYPE&#8230;&#8203; [o/ORDER] [o1/ORDER] [o2/ORDER] [o3/ORDER]</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>TYPE can only be either <strong>AUTHOR</strong>, <strong>NAME</strong> or <strong>RATING</strong>.</p>
</li>
<li>
<p>Able to sort more than one <strong>TYPE</strong> by writing down more than one <strong>TYPE</strong> after the <strong>sortBook</strong>.</p>
</li>
<li>
<p>ORDER can be either <strong>ASC</strong>(ascending) and <strong>DES</strong>(descending).</p>
</li>
<li>
<p>Omit o/ORDER, it will sort in <strong>ASC</strong>(ascending).</p>
</li>
<li>
<p>o1, o2, o3 is corresponding specify orders for each <strong>TYPE</strong> that specify in front.</p>
</li>
<li>
<p>o/ORDER is the order for all <strong>TYPEs</strong>, it will overwrite sub orders if both o and o1 appear at the same time.</p>
</li>
<li>
<p><strong>TYPE</strong> and <strong>ORDER</strong> are all case-insensitive.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sortBook st/name</code>
sort bookList by book name in ascending order.</p>
</li>
<li>
<p><code>sortBook st/rating st/name o1/des</code>
sort bookList by the rating of the book in descending order and if they having the same rating it will sort them by book name in ascending order.</p>
</li>
<li>
<p><code>sortBook st/author st/rating o/des o2/asc</code>
sort bookList by the author in descending order and if they having the same rating it will sort them by rating in des order. (o/des overwrite o2/asc)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="undoing-previous-command-code-undo-code"><a class="link" href="#undoing-previous-command-code-undo-code">3.2. Undoing previous command : <code>undo</code></a></h3>
<div class="paragraph">
<p>Restores the records to the state before the previous <em>undoable</em> command was executed.<br>
Format: <code>undo</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Undoable commands: those commands that modify the records content (<code>addBook</code>, <code>addReview</code>, <code>deleteBook</code>, <code>deleteReview</code>, <code>editBook</code>, <code>sortBook</code> and <code>clear</code>).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>listBook n/Alice</code><br>
<code>deleteBook 1</code><br>
<code>undo</code> (reverses the <code>deleteBook 1</code> command)<br></p>
</li>
<li>
<p><code>sortBook st/rating</code><br>
<code>undo</code> (reverses the <code>sortBook st/rating</code> command)<br></p>
</li>
<li>
<p><code>listBook a/James</code><br>
<code>undo</code><br>
The <code>undo</code> command fails as there are no undoable commands executed previously.</p>
</li>
<li>
<p><code>deleteBook 1</code><br>
<code>clear</code><br>
<code>undo</code> (reverses the <code>clear</code> command)<br>
<code>undo</code> (reverses the <code>deleteBook 1</code> command)<br></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="redoing-the-previously-undone-command-code-redo-code"><a class="link" href="#redoing-the-previously-undone-command-code-redo-code">3.3. Redoing the previously undone command: <code>redo</code></a></h3>
<div class="paragraph">
<p>Reverses the most recent <code>undo</code> command.<br>
Format: <code>redo</code></p>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>deleteBook 1</code><br>
<code>undo</code> (reverses the <code>deleteBook 1</code> command)<br>
<code>redo</code> (reapplies the <code>deleteBook 1</code> command)<br></p>
</li>
<li>
<p><code>deleteBook 1</code><br>
<code>redo</code><br>
The <code>redo</code> command fails as there are no <code>undo</code> commands executed previously.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="filter-books-coming-in-v2-0"><a class="link" href="#filter-books-coming-in-v2-0">3.4. filter books [coming in v2.0]</a></h3>
<div class="paragraph">
<p>Filters the book list by given condition.<br>
Format: <code>filterBook at/ATTRIBUTE c/CONDITION</code><br></p>
</div>
<div class="ulist">
<ul>
<li>
<p>simply provide <strong>ATTRIBUTE</strong> and <strong>CONDITION</strong> provided in the command to get the books desired.
Examples:</p>
</li>
<li>
<p>`filterBook f/rating c/&gt;8 ` show all books that rating greater than 8.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-developer-guide"><a class="link" href="#contributions-to-the-developer-guide">4. Contributions to the Developer Guide</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Given below are sections I contributed to the Developer Guide. They showcase my ability to write technical documentation and the technical depth of my contributions to the project.</p>
</div>
<div class="sect2">
<h3 id="sortbook-feature"><a class="link" href="#sortbook-feature">4.1. SortBook feature</a></h3>
<div class="sect3">
<h4 id="current-implementation"><a class="link" href="#current-implementation">4.1.1. Current Implementation</a></h4>
<div class="paragraph">
<p>The sortBook mechanism is facilitated by <code>VersionedBookShelf</code>.
It extends <code>BookShelf</code> with the sort function which will sort the <code>UniqueBookList</code>. <code>UniqueBookList</code> implemented the Booklist as <code>ObservableList&lt;Book&gt;</code>. sortBook command sort the Booklist in specify order by implementing the <code>Comaparator&lt;Book&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Additionally, it uses/implements the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VersionedBookShelf#sort()</code>&#8201;&#8212;&#8201;It calls <code>UniqueBookList</code> sortBooks function and notifies the listeners.</p>
</li>
<li>
<p><code>BookShelf#indicateModified()</code>&#8201;&#8212;&#8201;Notifies listeners that the bookshelf has been modified.</p>
</li>
<li>
<p><code>UniqueBookList#sortBooks()</code>&#8201;&#8212;&#8201;Implement the comparaotr, call <code>ObservableList&lt;Book&gt;</code> and pass in the comparator.</p>
</li>
<li>
<p><code>ObservableList&lt;Book&gt;#sort()</code>&#8201;&#8212;&#8201;sort the internalList is specify order.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Given below is an example usage scenario and how the sortBook mechanism behaves at each step.</p>
</div>
<div class="paragraph">
<p>Step 1. The user launches the application for the first time. The <code>VersionedBookShelf</code> will be initialized with the initial bookshelf state, and the <code>currentStatePointer</code> pointing to that single bookshelf state.</p>
</div>
<div class="paragraph">
<p>Step 2. The user executes <code>sortBook st/rating</code> command to sort all the books in the bookshelf in ascending order. The command will be pass to SortBookCommand Parser to convert it to SortBook command, the parser will check the correctness of the command. If the command is in incorrect formats, the parser will show correct command instruction to the user, otherwise, the parser will call the constructor of SortBook command.</p>
</div>
<div class="paragraph">
<p>Step 3. <code>SortBookCommand#execute</code> will be call, it will check whether the book list is empty before proceed to call <code>ModelManager#sort()</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the book list is empty, CommandException(MESSAGE_BOOK_LIST_EMPTY) will be thrown.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Step 4. If everything is correct, <code>VersionedBookShelf#sort()</code> will be called. It will execute <code>UniqueBookList#sortBooks</code> and <code>BookShelf#indicateModified</code> will be called after the list is been sorted to notify the listener that display data has been modified.</p>
</div>
<div class="paragraph">
<p>Step 5. <code>ObservableList&lt;Book&gt;</code> was implemented in <code>UniqueBookList</code> as internal list. <code>UniqueBookList#sortBooks</code> will call <code>ObservableList&lt;Book&gt;#sort</code> to sort the internal list by providing custom Comparator.</p>
</div>
<div class="paragraph">
<p>Step 6. ` model#commitBookShelf()` will be executed to store the current book list into <code>List&lt;ReadOnlyBookShelf&gt;</code> for support undo/redo command after the list is sorted and notify the listener.</p>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">4.1.2. Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-sorting-algorithm-implemented"><a class="link" href="#aspect-sorting-algorithm-implemented">Aspect: Sorting algorithm implemented.</a></h5>
<div class="paragraph">
<p>Alternative 1 has been chosen as the default choice, as built-in sorting function is enough for the current project.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Sorts using library sorting method.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Easy to implement, easy to maintain.</p>
</li>
<li>
<p>Cons: The sorting method is too general, can have a better sorting algorithm.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Using custom sorting method.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: more custom, may improve performance.</p>
</li>
<li>
<p>Cons: hard to maintain and easy to produce bugs.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="aspect-data-structure-to-support-the-sort-commands"><a class="link" href="#aspect-data-structure-to-support-the-sort-commands">Aspect: Data structure to support the sort commands</a></h5>
<div class="paragraph">
<p>Alternative 1 has been chosen as the default choice, as sub-list is not supporting sort function, it&#8217;s very time consume to use alternative 2.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Sorts with the complete list.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Easy to implement, as the list coming with sort function.</p>
</li>
<li>
<p>Cons: May have performance issues in terms of speed, as we need to sort the whole list.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Sorts with sub-list that available to the user.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: It is faster than the first choice as we only need to sort a partial list.</p>
</li>
<li>
<p>Cons: The sub-list is not supporting sort function, it&#8217;s hard and time-consuming to manipulate sorting and put it back to sub-list.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="undo-redo-feature"><a class="link" href="#undo-redo-feature">4.2. Undo/Redo feature</a></h3>
<div class="sect3">
<h4 id="current-implementation-2"><a class="link" href="#current-implementation-2">4.2.1. Current Implementation</a></h4>
<div class="paragraph">
<p>The undo/redo mechanism is facilitated by <code>VersionedBookShelf</code>.
It extends <code>BookShelf</code> with an undo/redo history, stored internally as a <code>BookStateList</code> and <code>currentStatePointer</code>.
Additionally, it implements the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VersionedBookShelf#commit()</code>&#8201;&#8212;&#8201;Saves the current bookshelf state in its history.</p>
</li>
<li>
<p><code>VersionedBookShelf#undo()</code>&#8201;&#8212;&#8201;Restores the previous bookshelf state from its history.</p>
</li>
<li>
<p><code>VersionedBookShelf#redo()</code>&#8201;&#8212;&#8201;Restores a previously undone bookshelf state from its history.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These operations are exposed in the <code>Model</code> interface as <code>Model#commitBookShelf()</code>, <code>Model#undoBookShelf()</code> and <code>Model#redoBookShelf()</code> respectively.</p>
</div>
<div class="paragraph">
<p>Given below is an example usage scenario and how the undo/redo mechanism behaves at each step.</p>
</div>
<div class="paragraph">
<p>Step 1. The user launches the application for the first time. The <code>VersionedBookShelf</code> will be initialized with the initial bookshelf state, and the <code>currentStatePointer</code> pointing to that single bookshelf state.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoStartingStateListDiagram.png" alt="UndoRedoStartingStateListDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p>Step 2. The user executes <code>deleteBook 1</code> command to delete the first book in the bookshelf. The <code>deleteBook</code> command calls <code>Model#commitBookShelf()</code>, causing the modified state of the book list after the <code>deleteBook 1</code> command executes to be saved in the <code>BookShelfStateList</code>, and the <code>currentStatePointer</code> is shifted to the newly inserted book list state.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoNewCommand1StateListDiagram.png" alt="UndoRedoNewCommand1StateListDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p>Step 3. The user executes <code>addBook n/David &#8230;&#8203;</code> to add a new book. The <code>addBook</code> command also calls <code>Model#commitBookShelf()</code>, causing another modified address book state to be saved into the <code>BookShelfStateList</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoNewCommand2StateListDiagram.png" alt="UndoRedoNewCommand2StateListDiagram" width="800">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If a command fails its execution, it will not call <code>Model#commitBookShelf()</code>, so the bookshelf state will not be saved into the <code>BookShelfStateList</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Step 4. The user now decides that adding the book was a mistake, and decides to undo that action by executing the <code>undo</code> command. The <code>undo</code> command will call <code>Model#undoBookShelf()</code>, which will shift the <code>currentStatePointer</code> once to the left, pointing it to the previous bookshelf state, and restores the bookshelf to that state.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoExecuteUndoStateListDiagram.png" alt="UndoRedoExecuteUndoStateListDiagram" width="800">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the <code>currentStatePointer</code> is at index 0, pointing to the initial bookshelf state, then there are no previous bookshelf states to restore. The <code>undo</code> command uses <code>Model#canundoBookShelf()</code> to check if this is the case. If so, it will return an error to the user rather than attempting to perform the undo.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following sequence diagram shows how the to undo operation works:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoSequenceDiagram.png" alt="UndoRedoSequenceDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p>The <code>redo</code> command does the opposite&#8201;&#8212;&#8201;it calls <code>Model#redoBookShelf()</code>, which shifts the <code>currentStatePointer</code> once to the right, pointing to the previously undone state, and restores the bookshelf to that state.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the <code>currentStatePointer</code> is at index <code>BookShelfStateList.size() - 1</code>, pointing to the latest bookshelf state, then there are no undone bookshelf states to restore. The <code>redo</code> command uses <code>Model#canredoBookShelf()</code> to check if this is the case. If so, it will return an error to the user rather than attempting to perform the redo.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Step 5. The user then decides to execute the command <code>listBook</code>. Commands that do not modify the book shelf, such as <code>listBook</code>, will usually not call <code>Model#commitBookShelf()</code>, <code>Model#undoBookShelf()</code> or <code>Model#redoBookShelf()</code>. Thus, the <code>BookShelfStateList</code> remains unchanged.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoNewCommand3StateListDiagram.png" alt="UndoRedoNewCommand3StateListDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p>Step 6. The user executes <code>clear</code>, which calls <code>Model#commitBookShelf()</code>. Since the <code>currentStatePointer</code> is not pointing at the end of the <code>BookShelfStateList</code>, all bookshelf states after the <code>currentStatePointer</code> will be purged. We designed it this way because it no longer makes sense to redo the <code>addBook n/David &#8230;&#8203;</code> command. This is the behavior that most modern desktop applications follow.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoNewCommand4StateListDiagram.png" alt="UndoRedoNewCommand4StateListDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p>The following activity diagram summarizes what happens when a user executes a new command:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoActivityDiagram.png" alt="UndoRedoActivityDiagram" width="650">
</div>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-2"><a class="link" href="#design-considerations-2">4.2.2. Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-how-undo-redo-executes"><a class="link" href="#aspect-how-undo-redo-executes">Aspect: How undo &amp; redo executes</a></h5>
<div class="paragraph">
<p>Alternative 1 has been chosen as the default choice, as it is easier than alternative 2 and less prone to error.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Saves the entire book list.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Easy to implement.</p>
</li>
<li>
<p>Cons: May have performance issues in terms of memory usage.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Individual command knows how to undo/redo by itself.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Will use less memory (e.g. for <code>deleteBook</code>, just save the book being deleted).</p>
</li>
<li>
<p>Cons: We must ensure that the implementation of each individual command is correct.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="aspect-data-structure-to-support-the-undo-redo-commands"><a class="link" href="#aspect-data-structure-to-support-the-undo-redo-commands">Aspect: Data structure to support the undo/redo commands</a></h5>
<div class="paragraph">
<p>Alternative 1 has been chosen as the default choice, as it is easier to implement than alternative 2 and less prone to error.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Use a list to store the history of book list states.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Easy for new Computer Science student undergraduates to understand, who are likely to be the new incoming developers of our project.</p>
</li>
<li>
<p>Cons: Logic is duplicated twice. For example, when a new command is executed, we must remember to update both <code>HistoryManager</code> and <code>VersionedBookShelf</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Use <code>HistoryManager</code> for undo/redo</p>
<div class="ulist">
<ul>
<li>
<p>Pros: We do not need to maintain a separate list, and just reuse what is already in the codebase.</p>
</li>
<li>
<p>Cons: Requires dealing with commands that have already been undone: We must remember to skip these commands. Violates Single Responsibility Principle and Separation of Concerns as <code>HistoryManager</code> now needs to do two different things.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="proposed-filter-book"><a class="link" href="#proposed-filter-book">4.3. [Proposed] Filter Book</a></h3>
<div class="sect3">
<h4 id="current-implementation-3"><a class="link" href="#current-implementation-3">4.3.1. Current Implementation</a></h4>
<div class="paragraph">
<p>The filterBook mechanism is facilitated by <code>VersionedBookShelf</code>.
It extends <code>BookShelf</code> with the filter function which will sort the <code>UniqueBookList</code>. <code>UniqueBookList</code> implemented the Booklist as <code>ObservableList&lt;Book&gt;</code>.FilterBook command filter the book list in specify order by looping through every book in the list to see whether the book satisfies the condition.</p>
</div>
<div class="paragraph">
<p>Additionally, it uses/implements the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VersionedBookShelf#filter()</code>&#8201;&#8212;&#8201;It calls <code>UniqueBookList</code> sortBooks function and notifies the listeners.</p>
</li>
<li>
<p><code>BookShelf#indicateModified()</code>&#8201;&#8212;&#8201;Notifies listeners that the bookshelf has been modified.</p>
</li>
<li>
<p><code>ObservableList&lt;Book&gt;#filter()</code>&#8201;&#8212;&#8201;filter the internalList for given condition</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Given below is an example usage scenario and how the filterBook mechanism behaves at each step.</p>
</div>
<div class="paragraph">
<p>Step 1. The user launches the application for the first time. The <code>VersionedBookShelf</code> will be initialized with the initial bookshelf state, and the <code>currentStatePointer</code> pointing to that single bookshelf state.</p>
</div>
<div class="paragraph">
<p>Step 2. The user executes <code>filterBook at/rating c/&gt;8</code> command to filter all the books in the bookshelf with rating bigger than 8. The command will be pass to FilterBookCommand Parser to convert it to FilterBook command, the parser will check the correctness of the command. If the command is in an incorrect format, the parser will show correct command instruction to the user, otherwise, the parser will call the constructor of SortBook command.</p>
</div>
<div class="paragraph">
<p>Step 3. <code>FilterBookCommand#execute</code> will be call, it will check whether the book list is empty before proceed to call <code>ModelManager#filter()</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the book list is empty, CommandException(MESSAGE_BOOK_LIST_EMPTY) will be thrown.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Step 4. If everything is correct, <code>VersionedBookShelf#filter()</code> will be called. It will execute <code>UniqueBookList#filterBooks</code> and <code>BookShelf#indicateModified</code> will be called after the list is been sorted to notify the listener that display data has been modified.</p>
</div>
<div class="paragraph">
<p>Step 5. <code>ObservableList&lt;Book&gt;</code> was implemented in <code>UniqueBookList</code> as internal list. <code>UniqueBookList#filterBooks</code> will loop through every element in the internal list and get all books that satisfy the condition.</p>
</div>
<div class="paragraph">
<p>Step 6. ` model#commitBookShelf()` will be executed to store the current booklist into <code>List&lt;ReadOnlyBookShelf&gt;</code> for support undo/redo command after the list is sorted and notify the listener.</p>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-3"><a class="link" href="#design-considerations-3">4.3.2. Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-filter-algorithm-implemented"><a class="link" href="#aspect-filter-algorithm-implemented">Aspect: Filter algorithm implemented.</a></h5>
<div class="paragraph">
<p>Alternative 1 will be chosen as default choice as this is a simple project, there is no need to support more conditions.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Filter the list using a loop.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Easy to implement, easy to maintain.</p>
</li>
<li>
<p>Cons: If more than one condition, need to write a lot of if condition inside the loop.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Using custom sorting method like CollectionUtils.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: more robust if want to support more conditions.</p>
</li>
<li>
<p>Cons: big overhead.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div></div><div id="footer"><div class="container"><div id="footer-text">Last updated 2019-04-12 08:37:59 UTC</div></div></div></body></html>